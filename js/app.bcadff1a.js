(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],u=0,m=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},o=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2b56":function(t,e,a){"use strict";var s=a("4548"),n=a.n(s);n.a},"2cce":function(t,e,a){},"2cfd":function(t,e,a){"use strict";var s=a("96d5"),n=a.n(s);n.a},4548:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticStyle:{height:"100vh"}},[t.disableNavigation?a("v-app-bar",{attrs:{dense:""}},[a("v-toolbar-title",[a("v-icon",{attrs:{"x-small":"",color:t.socketStatusColor}},[t._v("mdi-checkbox-blank-circle")]),a("b",{staticStyle:{"margin-left":"6px"}},[t._v(t._s(t.room?t.room:"..."))])],1),a("span",{staticStyle:{"margin-left":"12px"}},[t._v("Predplatené do: "+t._s(t.expiration?new Date(t.expiration).toLocaleDateString():"..."))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-icon",[t._v("mdi-cog")])],1)],1):t._e(),a("router-view",{staticStyle:{"max-height":"94.8%"},attrs:{settingsDialogState:t.dialog},on:{login:t.onLogin,socketStatus:t.onSocketStatusChange,settingsDialogState:t.onSettingsDialogStateChange}})],1)},o=[],i=(a("a9e3"),{name:"App",data:function(){return{room:null,expiration:null,socketStatusColor:"error",dialog:!1}},computed:{disableNavigation:function(){return"/login"!==this.$route.path&&"/register"!==this.$route.path}},methods:{onLogin:function(t){this.room=t.room,this.expiration=Number(t.expiration)},onSocketStatusChange:function(t){this.socketStatusColor=1===t?"success":"error"},onSettingsDialogStateChange:function(t){this.dialog=t}}}),r=i,l=a("2877"),c=a("6544"),d=a.n(c),u=a("7496"),m=a("40dc"),p=a("8336"),v=a("132d"),h=a("2fa4"),f=a("2a7f"),b=Object(l["a"])(r,n,o,!1,null,null,null),g=b.exports;d()(b,{VApp:u["a"],VAppBar:m["a"],VBtn:p["a"],VIcon:v["a"],VSpacer:h["a"],VToolbarTitle:f["a"]});var k=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{height:"100%"},attrs:{fluid:""}},[a("v-row",{staticStyle:{height:"100%"}},[a("v-col",{staticStyle:{height:"100%"},attrs:{cols:"4"}},[a("div",{staticClass:"some-area fill-height-or-more"},[a("v-card",{attrs:{elevation:"6"}},[a("v-card-title",[t._v(t._s(t.alertTimeLeft?"Poplach bol vyhlásený":"Vyhlásiť poplach"))]),a("v-card-subtitle",[t._v(t._s(t.alertTimeLeft?"Systém automaticky upozorní novo-pripojených členov po dobu "+t.alertTimeLeft+" minút":"Upozornť všetkých členov"))]),a("v-card-text",[a("v-btn",{attrs:{outlined:"",color:"error",large:"",disabled:!t.connected},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[t._v("Poplach!")])],1)],1),a("v-card",{staticClass:"custom-v-card",staticStyle:{"margin-top":"12px",flex:"1"},attrs:{elevation:"6",loading:t.connected}},[a("v-card-title",[t._v("Pripojení")]),t.connected?a("v-card-subtitle",[t._v("Počet online: "+t._s(t.connected?t.connectedMembers.length:"..."))]):t._e(),a("v-card-text",[t.connected?a("v-list",{attrs:{dense:""}},t._l(t.connectedMembers,(function(e){return a("v-list-item",{key:e.id,staticStyle:{padding:"0"}},[a("v-list-item-avatar",{attrs:{color:t.stringToHslColor(e.name),size:"36"}},[a("span",{staticClass:"white--text"},[t._v(t._s(e.name.split(" ").map((function(t){return t[0]})).join("")))])]),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1):a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-two-line, list-item-avatar, list-item-avatar-three-line"}})],1)],1)],1)]),a("v-col",{staticStyle:{height:"100%"},attrs:{cols:"8"}},[a("div",{staticClass:"some-area fill-height-or-more"},[a("v-card",{staticClass:"custom-v-card",attrs:{elevation:"6"}},[a("v-card-title",[t._v(" Prídem "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.clearAnswers()}}},[a("v-icon",[t._v("mdi-broom")])],1)],1),a("v-card-subtitle",[t._v("Počet účastníkov: "+t._s(t.connected?t.participants.length:"..."))]),a("v-card-text",[t.connected&&0!==t.participants.length?a("v-list",{attrs:{dense:""}},t._l(t.participants,(function(e){return a("v-list-item",{key:e.id,staticStyle:{padding:"0"}},[a("v-list-item-avatar",{attrs:{color:t.stringToHslColor(e.name),size:"36"}},[a("span",{staticClass:"white--text"},[t._v(t._s(e.name.split(" ").map((function(t){return t[0]})).join("")))])]),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.message)}})],1)],1)})),1):a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-three-line"}})],1)],1),a("v-card",{staticClass:"custom-v-card",attrs:{elevation:"6"}},[a("v-card-title",[t._v("Neprídem")]),a("v-card-subtitle",[t._v("Nezúčastní sa: "+t._s(t.connected?t.nonparticipants.length:"..."))]),a("v-card-text",[t.connected&&0!==t.nonparticipants.length?a("v-list",{attrs:{dense:""}},t._l(t.nonparticipants,(function(e){return a("v-list-item",{key:e.id,staticStyle:{padding:"0"}},[a("v-list-item-avatar",{attrs:{color:t.stringToHslColor(e.name),size:"36"}},[a("span",{staticClass:"white--text"},[t._v(t._s(e.name.split(" ").map((function(t){return t[0]})).join("")))])]),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.message)}})],1)],1)})),1):a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-three-line"}})],1)],1),a("v-card",{staticClass:"custom-v-card",attrs:{elevation:"6"}},[a("v-card-title",[t._v("Čaká sa na odpoveď")]),a("v-card-subtitle",[t._v("Neodpovedajú: "+t._s(t.connected?t.pendingMembers.length:"..."))]),a("v-card-text",[t.connected&&0!==t.pendingMembers.length?a("v-list",{attrs:{dense:""}},t._l(t.pendingMembers,(function(e){return a("v-list-item",{key:e.id,staticStyle:{padding:"0"}},[a("v-list-item-avatar",{attrs:{color:t.stringToHslColor(e.name),size:"36"}},[a("span",{staticClass:"white--text"},[t._v(t._s(e.name.split(" ").map((function(t){return t[0]})).join("")))])]),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1):a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar"}})],1)],1)],1)])],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Naozaj chcete vyhlásiť poplach?")]),a("v-card-text",[t._v(" Všetci pripojení členovia budú ihneď upozornení. Systém upozorní aj členov ktorý sa pripoja po vyhlásení poplachu a to po dobu "+t._s(t.gap)+" minút. "),a("br"),t._v("Nižšie môžete pridať krátku správu. ")]),a("v-card-text",[a("v-textarea",{attrs:{outlined:"",label:"Správa"},model:{value:t.customMessage,callback:function(e){t.customMessage=e},expression:"customMessage"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.alertConnected()}}},[t._v("Vyhlásiť")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"800"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Nastavenia")]),a("v-card-text",[a("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("div",{staticClass:"overline mb-4"},[t._v("PARAMETRE")]),a("v-list-item-subtitle",[t._v("Prispôsobte systém vašim potrebám")]),a("div",[a("v-slider",{attrs:{label:"Doba automatického upozornenia (v minútach)",min:"0",max:"15",step:"1","thumb-label":"always","thumb-size":24,"hide-details":"",ticks:""},model:{value:t.slider,callback:function(e){t.slider=e},expression:"slider"}}),a("v-switch",{attrs:{"persistent-hint":"",label:"Automatické vyčistenie odpovedí",hint:"Vymaže odpovede po vyhlásení nového poplachu"},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:"",disabled:t.slider==t.gap&&t.toggle==t.autoClear},on:{click:function(e){return t.changeParameters()}}},[t._v("Uložiť")])],1)],1)],1),a("v-card-text",[a("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("div",{staticClass:"overline mb-4"},[t._v("PLATNOSŤ")]),a("v-list-item-subtitle",[t._v("Predĺžte platnosť skupiny (platnosť vyprší "+t._s(t.roomDetails.expiration?new Date(Number(t.roomDetails.expiration)).toLocaleDateString():"...")+")")]),a("v-slider",{attrs:{hint:t.sum,"persistent-hint":"",label:"Počet mesiacov",min:"1",max:"12",step:"1","thumb-label":"always","thumb-size":24,ticks:""},model:{value:t.months,callback:function(e){t.months=e},expression:"months"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:"",disabled:""}},[t._v("Predplatiť")])],1)],1)],1),a("v-card-text",[a("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("div",{staticClass:"overline mb-4"},[t._v("PRÍSTUP")]),a("v-list-item-subtitle",{staticClass:"mb-2"},[t._v("Zmena prístupového hesla")]),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{filled:"",rounded:"",dense:"","append-icon":t.show?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show?"text":"password",label:"Nové heslo miestnosti",hint:"Slúži na vstup do miesnosti"},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:"",disabled:""}},[t._v("Zmeniť heslo")])],1)],1)],1)],1)],1)],1)},x=[],S=(a("4de4"),a("c740"),a("45fc"),a("b0c0"),a("b680"),{props:["settingsDialogState"],data:function(){return{currentMillis:Date.now(),gap:localStorage.getItem("gap")||5,slider:localStorage.getItem("gap")||5,autoClear:JSON.parse(localStorage.getItem("autoClear"))||!0,toggle:JSON.parse(localStorage.getItem("autoClear"))||!0,wsPingInterval:null,wsReconnectTimeout:null,socket:null,connected:!1,token:null,wsServer:sessionStorage.getItem("wsServer"),lastAlert:sessionStorage.getItem("lastAlert")||null,roomDetails:{room:null,expiration:null},dialog:!1,months:6,newPassword:"",show:!1,rules:{required:function(t){return!!t||"Povinné"},min:function(t){return t.length>=8||"Minimálne 8 znakov"}},valid:!1,customMessage:"",connectedMembers:[],participants:[],nonparticipants:[],pendingMembers:[]}},computed:{dialog2:{get:function(){return this.settingsDialogState},set:function(t){this.$emit("settingsDialogState",t)}},sum:function(){return 12===this.months?"Spolu: ".concat((10*this.months*.85).toFixed(2),"€ (zľava 15%)"):this.months>=6?"Spolu: ".concat((10*this.months*.9).toFixed(2),"€ (zľava 10%)"):this.months>=3?"Spolu: ".concat((10*this.months*.95).toFixed(2),"€ (zľava 5%)"):"Spolu: ".concat((10*this.months).toFixed(2),"€")},alertTimeLeft:function(){if(sessionStorage.getItem("lastAlert")||this.lastAlert){var t=((JSON.parse(this.lastAlert).timestamp+6e4*(Number(localStorage.getItem("gap"))||5)-this.currentMillis)/1e3).toFixed(0);return t>=0?(t-(t%=60))/60+(9<t?":":":0")+t:null}return null}},created:function(){var t=this;this.connect(),setInterval((function(){return t.currentMillis=Date.now()}),1e3)},methods:{connect:function(){var t=this;this.token=sessionStorage.getItem("authToken"),this.token?(this.socket=new WebSocket("wss://api.".concat(this.wsServer,".hasime.sk")),this.socket.onopen=function(){t.socket.send(JSON.stringify({action:"joinAdmin",token:t.token})),t.$emit("socketStatus",t.socket.readyState),t.roomDetails=t.$jwt_decode(sessionStorage.getItem("authToken")),t.$emit("login",t.roomDetails),t.connected=!0,clearInterval(t.wsPingInterval),t.wsPingInterval=setInterval(t.ping,25e3)},this.socket.onmessage=function(e){var a=JSON.parse(e.data);switch(a.action){case"roomUpdate":console.log(a.room),t.connectedMembers=a.room.filter((function(t){return!1===t.isAdmin}));break;case"newConnection":var s=a.socket;console.log("connection",s.name),t.connectedMembers.some((function(t){return t.name===s.name}))||t.connectedMembers.unshift(s),sessionStorage.getItem("lastAlert")&&Date.now()-JSON.parse(sessionStorage.getItem("lastAlert")).timestamp<6e4*(Number(localStorage.getItem("gap"))||5)&&(t.participants.some((function(t){return t.name===s.name}))||t.nonparticipants.some((function(t){return t.name===s.name}))||(t.socket.send(JSON.stringify({action:"alertOne",id:s.id,message:JSON.parse(sessionStorage.getItem("lastAlert")).message})),t.pendingMembers.some((function(t){return t.name===s.name}))||t.pendingMembers.unshift(s)));break;case"newDisconnection":console.log("disconnection",a.socket.name),t.connectedMembers=t.connectedMembers.filter((function(t){return t.name!==a.socket.name}));break;case"answer":if(t.pendingMembers=t.pendingMembers.filter((function(t){return t.name!==a.name})),a.participation){var n=t.participants.findIndex((function(t){return t.name===a.name}));-1===n?t.participants.unshift({id:a.id,name:a.name,message:a.message}):t.participants[n].message=a.message}else{var o=t.nonparticipants.findIndex((function(t){return t.name===a.name}));-1===o?t.nonparticipants.unshift({id:a.id,name:a.name,message:a.message}):t.nonparticipants[o].message=a.message}break;case"error":sessionStorage.clear(),t.$router.push("/login",(function(){}));break}},this.socket.onclose=function(){t.$emit("socketStatus",t.socket.readyState),t.connected=!1,console.log("Socket is closed. Reconnect will be attempted in 15 second."),clearTimeout(t.wsReconnectTimeout),t.wsReconnectTimeout=setTimeout((function(){console.log("Trying to reconnect..."),t.socket.close(),t.connect()}),15e3)},this.socket.onerror=function(){t.$emit("socketStatus",t.socket.readyState),t.connected=!1,t.socket.close()}):this.$router.push("/login")},ping:function(){this.connected&&this.socket.send(JSON.stringify({action:"ping"}))},stringToHslColor:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,s=0,n=0;n<t.length;n++)s=t.charCodeAt(n)+((s<<5)-s);var o=s%360;return"hsl("+o+", "+e+"%, "+a+"%)"},alertConnected:function(){this.autoClear&&this.clearAnswers(),this.socket.send(JSON.stringify({action:"alert",message:"".concat(this.customMessage)})),sessionStorage.setItem("lastAlert",JSON.stringify({timestamp:Date.now(),message:"".concat(this.customMessage)})),this.lastAlert=JSON.stringify({timestamp:Date.now(),message:"".concat(this.customMessage)}),this.pendingMembers=this.connectedMembers,this.dialog=!1,this.customMessage=""},clearAnswers:function(){this.participants=[],this.nonparticipants=[],this.pendingMembers=[]},changeParameters:function(){this.gap=this.slider,localStorage.setItem("gap",this.slider),this.autoClear=this.toggle,localStorage.setItem("autoClear",this.toggle)}}}),y=S,_=(a("2b56"),a("b0af")),C=a("99d9"),P=a("62ad"),V=a("a523"),T=a("169a"),N=a("4bd4"),z=a("8860"),M=a("da13"),j=a("8270"),I=a("5d23"),$=a("0fd9"),O=a("3129"),D=a("ba0d"),A=a("b73d"),E=a("8654"),L=a("a844"),q=Object(l["a"])(y,w,x,!1,null,null,null),J=q.exports;d()(q,{VBtn:p["a"],VCard:_["a"],VCardActions:C["a"],VCardSubtitle:C["b"],VCardText:C["c"],VCardTitle:C["d"],VCol:P["a"],VContainer:V["a"],VDialog:T["a"],VForm:N["a"],VIcon:v["a"],VList:z["a"],VListItem:M["a"],VListItemAvatar:j["a"],VListItemContent:I["a"],VListItemSubtitle:I["b"],VListItemTitle:I["c"],VRow:$["a"],VSkeletonLoader:O["a"],VSlider:D["a"],VSpacer:h["a"],VSwitch:A["a"],VTextField:E["a"],VTextarea:L["a"]});var F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100vw",height:"100vh",margin:"0"}},[s("video",{attrs:{src:a("ae46"),poster:a("fb2e"),autoplay:"",loop:"",playsinline:"",muted:""},domProps:{muted:!0}}),s("div",{staticClass:"overlay"},[s("div",{staticClass:"form"},[s("h1",[t._v("Registrácia")]),s("v-stepper",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{step:"1",complete:t.step>1}},[t._v("Vytvorte názov")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"2",complete:t.step>2}},[t._v("Overte email")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"3"}},[t._v("Pridajte zabezpečenie")])],1),s("v-stepper-content",{attrs:{step:"1"}},[s("v-form",{ref:"form",model:{value:t.valid1,callback:function(e){t.valid1=e},expression:"valid1"}},[s("v-text-field",{attrs:{rules:[t.rules.required,t.rules.room],label:"Názov zboru",hint:"Slúži na identifikáciu zboru",prefix:"ws1.",placeholder:"hasiciNitra",filled:"",rounded:""},model:{value:t.roomName,callback:function(e){t.roomName=e},expression:"roomName"}})],1),s("v-btn",{attrs:{outlined:"",disabled:!t.valid1},on:{click:function(e){t.step++}}},[t._v("Ďalší krok")])],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-form",{ref:"form",model:{value:t.valid2,callback:function(e){t.valid2=e},expression:"valid2"}},[s("v-text-field",{attrs:{disabled:t.snackbar,rules:[t.rules.required,t.rules.email],label:"Email",hint:"Slúži len na overenie",filled:"",rounded:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),s("v-btn",{attrs:{outlined:"",disabled:!t.valid2},on:{click:function(e){return t.confirmEmail()}}},[t._v("Overiť email")])],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-form",{ref:"form",model:{value:t.valid3,callback:function(e){t.valid3=e},expression:"valid3"}},[s("v-text-field",{attrs:{filled:"",rounded:"",disabled:t.snackbar,"append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show1?"text":"password",label:"Heslo zboru",hint:"Slúži na vstup (pripojenie) do zboru"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-text-field",{attrs:{filled:"",rounded:"",disabled:t.snackbar,"append-icon":t.show2?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min,t.passwordsNotEqual],type:t.show2?"text":"password",label:"Heslo administrátora",hint:"Slúži na správu zboru"},on:{"click:append":function(e){t.show2=!t.show2}},model:{value:t.adminPassword,callback:function(e){t.adminPassword=e},expression:"adminPassword"}})],1),s("v-btn",{attrs:{outlined:"",disabled:!t.valid3},on:{click:function(e){return t.signUp()}}},[t._v("Dokončiť registráciu")])],1)],1)],1)]),s("v-snackbar",{attrs:{timeout:t.timeout,"multi-line":""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" "),"Zbor vytvorený, môžete sa prihlásiť."===t.snackbarText?s("v-btn",{attrs:{text:""},on:{click:function(e){return t.$router.push("/login")}}},[t._v("Prihlásiť sa")]):"Overovací email odoslaný, prosím skontrolujte svoju schránku."!==t.snackbarText?s("v-btn",{attrs:{text:""},on:{click:function(e){return t.reload()}}},[t._v("Skúsiť znova")]):t._e()],1)],1)},H=[],R=(a("ac1f"),a("5319"),{data:function(){return{step:1,valid1:!1,valid2:!1,valid3:!1,roomName:"",email:"",snackbar:!1,snackbarText:"",timeout:0,password:"",adminPassword:"",show1:!1,show2:!1,rules:{required:function(t){return!!t||"Povinné"},min:function(t){return t.length>=8||"Minimálne 8 znakov"},room:function(t){return/^\S*$/.test(t)||"Nesmmie obsahovať medzery"},email:function(t){return/.+@.+\..+/.test(t)||"Zadajte platnú emailovú adresu"}}}},computed:{passwordsNotEqual:function(){var t=this;return function(){return t.password!==t.adminPassword||"Heslá nesmú byť rovnaké"}}},created:function(){this.$route.query.token&&(this.step=3)},methods:{confirmEmail:function(){var t=this;this.valid2=!1,this.$http.post("".concat(this.$apiEndpoint,"/verify"),{email:this.email,room:this.roomName}).then((function(e){t.snackbarText=e.data,t.snackbar=!0})).catch((function(e){t.snackbarText="Vyskytla sa chyba, prosím skúste neskôr.",t.snackbar=!0,console.error("Error:",e)}))},signUp:function(){var t=this;this.valid3=!1,this.$http.post("".concat(this.$apiEndpoint,"/create"),{token:this.$route.query.token,password:this.password,adminPassword:this.adminPassword}).then((function(e){t.snackbarText=e.data,t.snackbar=!0})).catch((function(e){t.snackbarText="Vyskytla sa chyba, prosím skúste neskôr.",t.snackbar=!0,console.error("Error:",e)}))},reload:function(){this.step=1,this.valid2=!1,this.valid3=!1,this.valid1=!1,this.roomName="",this.email="",this.snackbar=!1,this.snackbarText="",this.timeout=0,this.password="",this.adminPassword="",this.show1=!1,this.show2=!1,this.$route.query.token&&this.$router.replace("/register")}}}),Z=R,U=(a("2cfd"),a("ce7e")),B=a("2db4"),W=a("7e85"),G=a("e516"),K=a("9c54"),Q=a("56a4"),X=Object(l["a"])(Z,F,H,!1,null,null,null),Y=X.exports;d()(X,{VBtn:p["a"],VDivider:U["a"],VForm:N["a"],VSnackbar:B["a"],VStepper:W["a"],VStepperContent:G["a"],VStepperHeader:K["a"],VStepperStep:Q["a"],VTextField:E["a"]});var tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100vw",height:"100vh",margin:"0"}},[s("video",{attrs:{src:a("ae46"),poster:a("fb2e"),autoplay:"",loop:"",playsinline:"",muted:""},domProps:{muted:!0}}),s("div",{staticClass:"overlay"},[s("div",{staticClass:"form"},[s("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("h1",[t._v("Prihlásenie")]),s("v-text-field",{attrs:{disabled:t.snackbar,rules:[t.rules.required,t.rules.room],label:"Názov zboru",hint:"Slúži na identifikáciu zboru",filled:"",rounded:""},model:{value:t.roomName,callback:function(e){t.roomName=e},expression:"roomName"}}),s("v-text-field",{attrs:{disabled:t.snackbar,filled:"",rounded:"","append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show1?"text":"password",label:"Heslo zboru",hint:"Slúži na vstup (pripojenie) do zboru"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-text-field",{attrs:{disabled:t.snackbar,filled:"",rounded:"","append-icon":t.show2?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show2?"text":"password",label:"Heslo administrátora",hint:"Slúži na správu zboru"},on:{"click:append":function(e){t.show2=!t.show2}},model:{value:t.adminPassword,callback:function(e){t.adminPassword=e},expression:"adminPassword"}}),s("v-btn",{attrs:{outlined:"",disabled:!t.valid},on:{click:function(e){return t.login()}}},[t._v("Prihlásiť sa")])],1)],1)]),s("v-snackbar",{attrs:{timeout:t.timeout,"multi-line":""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" "),"Nesprávne meno alebo heslo."===t.snackbarText||"Zbor neexistuje."===t.snackbarText||"Zlá požiadavka"===t.snackbarText?s("v-btn",{attrs:{text:""},on:{click:function(e){return t.reload()}}},[t._v("Skúsiť znova")]):s("v-btn",{attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Ok")])],1)],1)},et=[],at=(a("466d"),{data:function(){return{valid:!1,roomName:"",password:"",adminPassword:"",show1:!1,show2:!1,rules:{required:function(t){return!!t||"Povinné"},min:function(t){return t.length>=8||"Minimálne 8 znakov"},room:function(t){return/^\S*$/.test(t)||"Nesmmie obsahovať medzery"}},snackbar:!1,snackbarText:"",timeout:0}},methods:{login:function(){var t=this;this.valid=!1,this.$http.post("".concat(this.$apiEndpoint,"/login"),{room:this.roomName,password:this.password,adminPassword:this.adminPassword}).then((function(e){"Nesprávne meno alebo heslo."===e.data||"Zbor neexistuje."===e.data||"Zlá požiadavka"===e.data?(t.snackbarText=e.data,t.snackbar=!0):(sessionStorage.setItem("authToken",e.data),sessionStorage.setItem("wsServer","".concat(t.roomName.match(/[^.]*/)[0])),t.$emit("login",t.$jwt_decode(e.data)),t.$router.push("/"))})).catch((function(e){t.snackbarText="Vyskytla sa chyba, prosím skúste neskôr.",t.snackbar=!0,console.error("Error:",e)}))},reload:function(){this.valid=!1,this.roomName="",this.password="",this.adminPassword="",this.show1=!1,this.show2=!1,this.snackbar=!1,this.snackbarText="",this.timeout=0}}}),st=at,nt=(a("d6db"),Object(l["a"])(st,tt,et,!1,null,null,null)),ot=nt.exports;d()(nt,{VBtn:p["a"],VForm:N["a"],VSnackbar:B["a"],VTextField:E["a"]}),s["a"].use(k["a"]);var it=[{path:"/register",name:"Register",component:Y},{path:"/login",name:"Login",component:ot},{path:"/",name:"Dashboard",component:J}],rt=new k["a"]({mode:"history",base:"/",routes:it}),lt=rt,ct=a("f309");s["a"].use(ct["a"]);var dt=new ct["a"]({theme:{dark:!0}}),ut=a("bc3a"),mt=a.n(ut),pt=a("04e1"),vt=a.n(pt);s["a"].prototype.$http=mt.a,s["a"].prototype.$jwt_decode=vt.a,s["a"].prototype.$apiEndpoint="https://api.hasime.sk",s["a"].config.productionTip=!1,new s["a"]({router:lt,vuetify:dt,render:function(t){return t(g)}}).$mount("#app")},"96d5":function(t,e,a){},ae46:function(t,e,a){t.exports=a.p+"media/video.a303de1c.mp4"},d6db:function(t,e,a){"use strict";var s=a("2cce"),n=a.n(s);n.a},fb2e:function(t,e,a){t.exports=a.p+"img/poster.3a089f6c.jpg"}});
//# sourceMappingURL=app.bcadff1a.js.map